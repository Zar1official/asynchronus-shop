# Асинхронный телеграм-бот с блэкджеком и админкой.

Бот, магазин для ваших товаров, на котором можно заработать. Оплата происходит через систему Юкасса. Есть админка с кучей функций, а также возможность подписки для пользователей (важные новости и товары).

## Основное меню.
Навигационное меню включает в себя четыре раздела: **каталог товаров, корзина, рассылка и админка** (доступна только администраторам, другим пользователям нет доступа к ней).

![image](https://user-images.githubusercontent.com/87152110/134820718-d360bafb-459f-4ac0-a66e-5f0b881a23be.png)

## Каталог товаров
Любой товар можно добавлять в корзину пока он не закончится на складе (бот пришлет уведомление). Выход из каталога товаров кнопка назад.

![image](https://user-images.githubusercontent.com/87152110/134823652-65eea70b-e7bc-49ea-8cba-f1fb4f6a65b0.png)


## Рассылка
В боте есть возможность подписаться на спецальную рассылку. Вы будете получать новости о новых товарах, а также важные сообщения от администраторов.

![mailing](https://user-images.githubusercontent.com/87152110/134821155-bdc15b94-7557-409a-8a18-64e79dda0876.png)

## Корзина
Есть возможность отмены покупки, в таком случае корзина очищается.

![image](https://user-images.githubusercontent.com/87152110/134959039-90661184-f803-4b76-9767-a471a7568538.png)

Здесь показан пример тестового платежа. После оплаты администраторы получают уведомление о заказе.

![image](https://user-images.githubusercontent.com/87152110/134959085-2c30a891-1796-4f8a-b6f1-7fb7c97d372b.png)

## Админка
1. Добавление нового товара, настройка названия, описания, цены, кол-ва на складе и фотографии. Можно уведомлять подписчиков о новинке.
2. Возможность как удаления отдельных товаров, так и очищения всего магазина.
3. Специальное сообщение (показывается всем подписичкам).
4. Можно добавлять новых админов и добавлять существующих. Чтобы сделать человека админом, у него должен быть чат с ботом.

![image](https://user-images.githubusercontent.com/87152110/134822812-43cc864e-3a6e-4f89-a590-ca6f08af0621.png)

## Настройка
Для начала нужно получить токен от бота в BotFather, а также токен от вашей Юкассы. Ее настройка проходит через <b>Bot -> Payments -> Юкасса</b>. Для тестовых платежей используйте токен, который можно сгенерировать через BotFather и получить <a href = "https://t.me/YooKassaTestBot">туть</a>.

Теперь необходимо настроить MongoDB. В конфигурационном файле указаны названия бд и коллекций по умолчанию, вы можете заменить их на свои. В кластере обязательно должна быть БД для корзины, туда будут лететь заказы, которые покупатели добавили в корзину, БД пользователей с двумя коллекциями (админы и подписчики), а также БД, в которой мы будем хранить товары.

![image](https://user-images.githubusercontent.com/87152110/134946149-a9611205-bda0-4ea9-afe1-625ab12b0d1b.png)

Осталось дело за малым. Добавить админку. В разделе <b>Database Access</b> создайте пользователя с правами чтения и записи любой БД. Теперь внесите user_name и user_password в конфигурационный файл. Далее нам нужно добавить себя в БД пользователей Mongo, чтобы был доступ к админке в самом боте. Создайте в коллекции админов новый документ, внесите в него свой id (можно узнать <a href = "https://t.me/my_id_bot">здесь</a>) и user_name. Пример показан ниже. На этом настройка магазина завершена!

![image](https://user-images.githubusercontent.com/87152110/134951288-cbd223d4-18c6-40db-9fdb-c4c0678c5ccc.png)


## Стек
>Python: https://www.python.org/
>
>Aiogram: https://github.com/aiogram/aiogram
>
>Motor: https://github.com/mongodb/motor
>
>MongoDB: https://www.mongodb.com/


![стек](https://user-images.githubusercontent.com/87152110/134823163-8d34b729-bfc0-4ace-9116-f19dc4d34e4a.png)



